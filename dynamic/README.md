# 针对复杂动态场景的自动判定

> 目前许多超级app都会具备UI动态化的设计，以达到更高的灵活度。在 0.10.0 之后，stagesepx 借助了 keras 来处理该类型问题。

## 背景

这个例子主要针对一些动态生成的特殊场景，例如：

- 内容型APP每次打开首页内容都不一致
- 插屏广告播放的内容是随机的
- 游戏某个阶段场景是动态的（有循环播放的动画等，很多游戏的初始界面都会有）

而单纯靠 SVM classifier 难以很好地处理上述情况（详见 [issue#89](https://github.com/williamfzc/stagesep/issues/89)）。为此，我们引入了神经网络用于处理这些特殊情况。

## 原理

> 已假设读者具备基本的机器学习基础，并已阅读 [自动测试APP启动速度](../auto) 部分。

利用 神经网络 进行图像分类已经是种非常成熟的技术（可以参考 [面向小数据集构建图像分类模型](https://keras-cn.readthedocs.io/en/latest/legacy/blog/image_classification_using_very_little_data/))，效果也很好。此处不再赘述。

为什么一开始 stagesepx 没有采用这种技术：

- 一方面是神经网络要达到比较好的效果需要更高的成本（更长的时间与更大的训练集），而我们希望的是低依赖且方便快速，不需要过多前置准备；
- 另一方面，就初期需求而言，SVM的表现已经足够好，完全能够胜任单视频情况下的分类工作；
- 至于为什么现在需要神经网络，在背景中有提到；

虽然在构造与原理上 SVM 与神经网络差异很大，但我们在 API 层面上尽可能地保证了该类 classifier 的调用模式相似。

与所有 classifier 相同，它本身与 cutter 并不会有任何耦合，我们可以通过自定义训练集来干预分类的结果。

在调用层面上，流程是一样的：

- 加载数据
- 训练模型
- 应用模型

值得注意的是，它与SVM的表现上有一些差异： 
 
- 默认情况下我们使用 SVM + HOG 的组合进行分类，它表现为（与算法、api的设计都有关）较高的训练效率与较低的预测效率；
- 神经网络的表现是，训练效率较低（耗时更长，算力需求更高）但预测效率较高（模型训练完成后预测速度快）；

## 使用


